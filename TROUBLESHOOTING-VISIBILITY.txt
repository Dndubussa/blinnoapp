PRODUCT VISIBILITY TROUBLESHOOTING GUIDE
=========================================

PROBLEM: Products don't show on /products or marketplace pages

STEP-BY-STEP FIX:
-----------------

1. DIAGNOSE (Check browser console):
   - Open /products page
   - Press F12 to open DevTools
   - Go to Console tab
   - Look for these messages:
     üîç Fetching products from database...
     ‚úÖ Products fetched: X products
     ‚ö†Ô∏è No products found in database with is_active=true

2. CHECK DATABASE:
   Run: diagnose-visibility.sql
   
   Look for:
   - How many products have is_active = true?
   - Do products exist at all?
   - Are there RLS policy issues?

3. FIX THE ISSUE:
   Run: fix-product-visibility.sql
   
   This will:
   ‚úÖ Set all products to is_active = true
   ‚úÖ Fix NULL/empty required fields
   ‚úÖ Set default prices for zero-price products
   ‚úÖ Check RLS policies

4. IF STILL NOT WORKING:
   The issue is likely RLS (Row Level Security)
   
   Run Step 5 from fix-product-visibility.sql:
   - Uncomment the policy code at the bottom
   - Run it separately in SQL Editor
   - This ensures anonymous users can read products

5. VERIFY:
   - Clear browser cache (Ctrl + Shift + R)
   - Open incognito/private window
   - Go to /products page
   - Products should now be visible!

COMMON CAUSES:
--------------
‚ùå is_active = false (products hidden)
‚ùå is_active = NULL (default value issue)
‚ùå RLS policy blocking anonymous users
‚ùå Price = 0 causing display issues
‚ùå Missing required fields (title, category, currency)

QUICK CHECK QUERIES:
--------------------
-- Count active products
SELECT COUNT(*) FROM products WHERE is_active = true;

-- Show sample products
SELECT id, title, is_active, price, currency FROM products LIMIT 5;

-- Check RLS policies
SELECT * FROM pg_policies WHERE tablename = 'products';
